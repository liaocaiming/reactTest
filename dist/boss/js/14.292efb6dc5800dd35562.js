(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1166:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return R}));var r,a=n(543),i=n.n(a),s=n(81),l=n.n(s),o=n(55),c=n.n(o),d=n(56),u=n.n(d),f=n(57),h=n.n(f),m=n(58),p=n.n(m),w=n(31),b=n.n(w),v=n(0),y=n.n(v),x=n(228),I=n(516),_=n(206),O=n(522);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=80,D=_.a.intervals.map((function(t){return{value:t,label:t}})),P=function(t){var e=t&&"#ffffff"===t.toLocaleLowerCase()?"1px solid #ccc":"1px solid ".concat(t||"transparent");return y.a.createElement("div",{className:"item",style:{background:t,border:e}})},k={"#F00000":1,"#808080":2,"#008000":3},E=function(t){return t.includes("_")?function(e,n){return(k[e[t]]||1)-(k[n[t]]||1)}:function(e,n){return e[t]-n[t]}},R=Object(I.b)()(r=function(t){h()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(t){var r;return c()(this,n),(r=e.call(this,t)).wss=void 0,r.symbolMap={},r.list=[],r.timer=null,r.row=[{title:"币种",dataIndex:"symbol",align:"center",fixed:"left",width:j},{title:"当前价格",dataIndex:"price",align:"center",sorter:E("price"),fixed:"left",width:j},{title:"趋势",dataIndex:"qushi",children:[{title:"1m",dataIndex:"1m_trend",width:j,render:P,sorter:E("1m_trend")},{title:"3m",dataIndex:"3m_trend",width:j,render:P,sorter:E("3m_trend")},{title:"5m",dataIndex:"5m_trend",width:j,render:P,sorter:E("5m_trend")},{title:"15m",dataIndex:"15m_trend",width:j,render:P,sorter:E("15m_trend")},{title:"30m",dataIndex:"30m_trend",width:j,render:P,sorter:E("30m_trend")},{title:"1h",dataIndex:"1h_trend",width:j,render:P,sorter:E("1h_trend")},{title:"4h",dataIndex:"4h_trend",width:j,render:P,sorter:E("4h_trend")},{title:"12h",dataIndex:"12h_trend",width:j,render:P,sorter:E("12h_trend")},{title:"1d",dataIndex:"1d_trend",width:j,render:P,sorter:E("1d_trend")},{title:"1w",dataIndex:"1w_trend",width:j,render:P,sorter:E("1w_trend")}]},{title:"乖离",dataIndex:"guaili",children:[{title:"cs",dataIndex:"cs",width:j,sorter:E("cs")},{title:"sm",dataIndex:"sm",width:j,sorter:E("sm")},{title:"ml",dataIndex:"ml",width:j,sorter:E("ml")}]}],r.searchRow=[{title:"周期",dataIndex:"period",type:"select",list:D},{title:"校验类型",dataIndex:"s_type",type:"select",list:[{value:"1",label:"现货"},{value:"3",label:"合约"}]},{title:"币种",dataIndex:"symbol",type:"select",eleAttr:{mode:"tags"}},{title:"交易对",dataIndex:"asset",type:"select",list:[{value:"btc",label:"btc"},{value:"usdt",label:"usdt"}]}],r.socketStart=function(t){r.wss=Object(_.f)({url:"cable",channel:"TrendDataChannel",message:function(t){var e=r.list.slice(),n=(t||{}).message,a=void 0===n?{}:n,i=a.symbol,s=r.symbolMap[i];e.length>0&&i&&void 0!==s&&e[s]&&e[s].symbol===i&&(e[s]=S(S({},e[s]),a),r.list=e)},open:function(){t&&t()}})},r.handleSearch=function(t){r.getListData(t)},r.getListData=function(t){var e=r.props.actions;r.wss&&r.wss.close&&r.wss.close(),e.post(x.a.excel_data,t).then((function(e){var n=(e||{}).data,a=void 0===n?[]:n;if(a.length>0){var i=[];a.forEach((function(t,e){var n=t.symbol;r.symbolMap[n]=e,i.push(n)}));var s=S(S({channel:"TrendDataChannel"},t),{},{symbol:i}),l={command:"subscribe",identifier:JSON.stringify(s)},o=JSON.stringify(l);r.socketStart((function(){r.wss.send(o)})),r.list=a,r.setState({list:a})}}))},r.renderGroupSearch=function(){return y.a.createElement("div",null,y.a.createElement(O.b,{isShowResetBtn:!0,handleSearch:r.handleSearch,rowData:r.searchRow}))},r.renderTable=function(){var t=r.state.list;return y.a.createElement("div",null,y.a.createElement(O.c,{columns:r.row,pagination:!1,dataSource:t,scroll:{x:"max-content",y:"74vh"}}))},r.state={list:[]},r}return u()(n,[{key:"componentWillUnmount",value:function(){this.wss&&this.wss.close&&this.wss.close(),clearInterval(this.timer)}},{key:"componentDidMount",value:function(){var t=this;this.timer=setInterval((function(){t.setState({list:i()(t.list)})}),1e4)}},{key:"render",value:function(){return y.a.createElement("div",{className:"iconSelectList"},this.renderGroupSearch(),this.renderTable())}}]),n}(y.a.PureComponent))||r}}]);